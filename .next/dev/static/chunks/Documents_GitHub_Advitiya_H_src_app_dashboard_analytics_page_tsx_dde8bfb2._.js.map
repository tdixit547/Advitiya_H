{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/grover.heer/Documents/GitHub/Advitiya_H/src/app/dashboard/analytics/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport {\n    LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend,\n    BarChart, Bar, PieChart, Pie, Cell\n} from 'recharts';\nimport { AnalyticsStats } from '@/types';\n\nconst COLORS = ['#00C853', '#00E676', '#69F0AE', '#B9F6CA', '#E0E0E0'];\n\nexport default function AnalyticsPage() {\n    const [stats, setStats] = useState<AnalyticsStats | null>(null);\n    const [period, setPeriod] = useState<'7d' | '30d' | '90d'>('7d');\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchStats = async () => {\n            setIsLoading(true);\n            try {\n                const res = await fetch(`/api/analytics/stats?hub_id=1&period=${period}`);\n                const data = await res.json();\n                if (data.success) {\n                    setStats(data.data);\n                }\n            } catch (error) {\n                console.error('Failed to fetch analytics:', error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        fetchStats();\n    }, [period]);\n\n    // Mock data for visualization when no real data\n    const chartData = stats?.viewsByDay?.length ? stats.viewsByDay : [\n        { date: 'Mon', views: 45, clicks: 20 },\n        { date: 'Tue', views: 65, clicks: 35 },\n        { date: 'Wed', views: 85, clicks: 45 },\n        { date: 'Thu', views: 120, clicks: 80 },\n        { date: 'Fri', views: 95, clicks: 60 },\n        { date: 'Sat', views: 150, clicks: 90 },\n        { date: 'Sun', views: 180, clicks: 110 },\n    ];\n\n    const deviceData = stats?.viewsByDevice?.length ? stats.viewsByDevice : [\n        { device: 'Mobile', count: 625 },\n        { device: 'Desktop', count: 512 },\n        { device: 'Tablet', count: 113 },\n    ];\n\n    const countryData = stats?.viewsByCountry?.length ? stats.viewsByCountry : [\n        { country: 'IN', count: 456 },\n        { country: 'US', count: 298 },\n        { country: 'UK', count: 156 },\n        { country: 'CA', count: 89 },\n        { country: 'DE', count: 67 },\n    ];\n\n    const ctr = stats && stats.totalViews > 0\n        ? ((stats.totalClicks / stats.totalViews) * 100).toFixed(1)\n        : '0.0';\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-2xl font-bold text-white\">Analytics</h1>\n                <div className=\"flex bg-[#111] border border-[#222] rounded-lg p-1\">\n                    {(['7d', '30d', '90d'] as const).map((p) => (\n                        <button\n                            key={p}\n                            onClick={() => setPeriod(p)}\n                            className={`px-4 py-2 text-sm rounded-md transition-colors ${period === p\n                                    ? 'bg-[#00C853] text-black font-bold'\n                                    : 'text-[#9A9A9A] hover:text-white'\n                                }`}\n                        >\n                            {p === '7d' ? 'Week' : p === '30d' ? 'Month' : 'Quarter'}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            {/* KPIs */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <KpiCard\n                    label=\"Total Views\"\n                    value={stats?.totalViews || 0}\n                    icon=\"ðŸ‘ï¸\"\n                />\n                <KpiCard\n                    label=\"Total Clicks\"\n                    value={stats?.totalClicks || 0}\n                    icon=\"ðŸ–±ï¸\"\n                />\n                <KpiCard\n                    label=\"CTR\"\n                    value={`${ctr}%`}\n                    icon=\"ðŸ“Š\"\n                />\n                <KpiCard\n                    label=\"Unique Visitors\"\n                    value={stats?.uniqueVisitors || 0}\n                    icon=\"ðŸ‘¥\"\n                />\n            </div>\n\n            {/* Traffic Chart */}\n            <div className=\"bg-[#111] rounded-xl border border-[#222] p-6\">\n                <h2 className=\"text-lg font-bold text-white mb-4\">Traffic Overview</h2>\n                <div className=\"h-64\">\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <LineChart data={chartData}>\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#222\" vertical={false} />\n                            <XAxis dataKey=\"date\" stroke=\"#666\" fontSize={12} tickLine={false} />\n                            <YAxis stroke=\"#666\" fontSize={12} tickLine={false} axisLine={false} />\n                            <Tooltip\n                                contentStyle={{ backgroundColor: '#0a0a0a', border: '1px solid #333', borderRadius: '8px' }}\n                                labelStyle={{ color: '#9A9A9A' }}\n                            />\n                            <Legend />\n                            <Line type=\"monotone\" dataKey=\"views\" name=\"Views\" stroke=\"#00C853\" strokeWidth={2.5} dot={{ r: 3 }} />\n                            <Line type=\"monotone\" dataKey=\"clicks\" name=\"Clicks\" stroke=\"#666\" strokeWidth={2} strokeDasharray=\"5 5\" />\n                        </LineChart>\n                    </ResponsiveContainer>\n                </div>\n            </div>\n\n            {/* Two Column Charts */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                {/* Device Breakdown */}\n                <div className=\"bg-[#111] rounded-xl border border-[#222] p-6\">\n                    <h2 className=\"text-lg font-bold text-white mb-4\">Device Breakdown</h2>\n                    <div className=\"h-48\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <PieChart>\n                                <Pie\n                                    data={deviceData}\n                                    dataKey=\"count\"\n                                    nameKey=\"device\"\n                                    cx=\"50%\"\n                                    cy=\"50%\"\n                                    outerRadius={70}\n                                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                                    labelLine={false}\n                                >\n                                    {deviceData.map((_, index) => (\n                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                                    ))}\n                                </Pie>\n                                <Tooltip />\n                            </PieChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n\n                {/* Country Distribution */}\n                <div className=\"bg-[#111] rounded-xl border border-[#222] p-6\">\n                    <h2 className=\"text-lg font-bold text-white mb-4\">Top Countries</h2>\n                    <div className=\"h-48\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={countryData} layout=\"vertical\">\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#222\" horizontal={false} />\n                                <XAxis type=\"number\" stroke=\"#666\" fontSize={12} />\n                                <YAxis dataKey=\"country\" type=\"category\" stroke=\"#666\" fontSize={12} width={40} />\n                                <Tooltip\n                                    contentStyle={{ backgroundColor: '#0a0a0a', border: '1px solid #333', borderRadius: '8px' }}\n                                />\n                                <Bar dataKey=\"count\" fill=\"#00C853\" radius={[0, 4, 4, 0]} />\n                            </BarChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n            </div>\n\n            {/* Top Links Table */}\n            <div className=\"bg-[#111] rounded-xl border border-[#222] p-6\">\n                <h2 className=\"text-lg font-bold text-white mb-4\">Top Performing Links</h2>\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                        <thead>\n                            <tr className=\"border-b border-[#222] text-[#9A9A9A] text-sm\">\n                                <th className=\"text-left py-3 font-medium\">Link</th>\n                                <th className=\"text-right py-3 font-medium\">Clicks</th>\n                                <th className=\"text-right py-3 font-medium\">CTR</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {(stats?.topLinks?.length ? stats.topLinks : [\n                                { id: 1, title: 'My Portfolio', clicks: 452, ctr: 12 },\n                                { id: 2, title: 'GitHub', clicks: 320, ctr: 8 },\n                                { id: 3, title: 'LinkedIn', clicks: 280, ctr: 7 },\n                            ]).map((link) => (\n                                <tr key={link.id} className=\"border-b border-[#222] hover:bg-[#1a1a1a]\">\n                                    <td className=\"py-3 text-white truncate max-w-[200px]\">{link.title}</td>\n                                    <td className=\"py-3 text-right text-[#00C853] font-medium\">{link.clicks}</td>\n                                    <td className=\"py-3 text-right text-[#9A9A9A]\">{link.ctr}%</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction KpiCard({ label, value, icon }: { label: string; value: string | number; icon: string }) {\n    return (\n        <div className=\"bg-[#111] rounded-xl border border-[#222] p-4\">\n            <div className=\"flex items-center gap-2 mb-1\">\n                <span className=\"text-lg\">{icon}</span>\n                <p className=\"text-[#666] text-xs uppercase tracking-wider\">{label}</p>\n            </div>\n            <p className=\"text-2xl font-bold text-white\">\n                {typeof value === 'number' ? value.toLocaleString() : value}\n            </p>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}