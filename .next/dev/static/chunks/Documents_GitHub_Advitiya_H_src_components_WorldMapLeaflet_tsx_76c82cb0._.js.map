{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/grover.heer/Documents/GitHub/Advitiya_H/src/components/WorldMapLeaflet.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Export interface for props\nexport interface WorldMapLeafletProps {\n    selectedCountry: string;\n    onCountrySelect: (countryCode: string) => void;\n}\n\n// World GeoJSON source URL (Natural Earth countries)\nconst WORLD_GEOJSON_URL = 'https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson';\n\nexport default function WorldMapLeaflet({ selectedCountry, onCountrySelect }: WorldMapLeafletProps) {\n    const mapRef = useRef<HTMLDivElement>(null);\n    const leafletMap = useRef<L.Map | null>(null);\n    const geoJsonLayer = useRef<L.GeoJSON | null>(null);\n    const [hoveredCountry, setHoveredCountry] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        if (!mapRef.current || leafletMap.current) return;\n\n        // Initialize map - world view\n        const map = L.map(mapRef.current, {\n            center: [20, 0],\n            zoom: 2,\n            minZoom: 1,\n            maxZoom: 6,\n            zoomControl: true,\n            attributionControl: false,\n            worldCopyJump: true,\n        });\n\n        // Dark tile layer\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n            attribution: '© OpenStreetMap, © CARTO',\n            noWrap: false,\n        }).addTo(map);\n\n        leafletMap.current = map;\n\n        // Load GeoJSON\n        fetch(WORLD_GEOJSON_URL)\n            .then(res => res.json())\n            .then(data => {\n                const geoJson = L.geoJSON(data, {\n                    style: (feature) => {\n                        const countryCode = feature?.properties?.ISO_A2 || '';\n                        const isSelected = countryCode === selectedCountry;\n\n                        return {\n                            fillColor: isSelected ? '#00C853' : '#1a1a1a',\n                            fillOpacity: isSelected ? 0.6 : 0.7,\n                            color: isSelected ? '#00C853' : '#333',\n                            weight: isSelected ? 2 : 0.5,\n                        };\n                    },\n                    onEachFeature: (feature, layer) => {\n                        const countryName = feature?.properties?.ADMIN || feature?.properties?.name || 'Unknown';\n                        const countryCode = feature?.properties?.ISO_A2 || '';\n\n                        layer.on({\n                            mouseover: (e) => {\n                                const target = e.target;\n                                if (countryCode !== selectedCountry) {\n                                    target.setStyle({\n                                        fillColor: '#00C853',\n                                        fillOpacity: 0.3,\n                                        color: '#00C853',\n                                        weight: 1.5,\n                                    });\n                                }\n                                setHoveredCountry(countryName);\n                                target.bringToFront();\n                            },\n                            mouseout: (e) => {\n                                if (geoJsonLayer.current) {\n                                    geoJsonLayer.current.resetStyle(e.target);\n                                }\n                                setHoveredCountry(null);\n                            },\n                            click: () => {\n                                if (countryCode && countryCode !== '-99') {\n                                    onCountrySelect(countryCode);\n                                }\n                            }\n                        });\n\n                        // Bind tooltip\n                        layer.bindTooltip(countryName, {\n                            permanent: false,\n                            direction: 'center',\n                            className: 'country-tooltip'\n                        });\n                    }\n                }).addTo(map);\n\n                geoJsonLayer.current = geoJson;\n                setIsLoading(false);\n            })\n            .catch(err => {\n                console.error('Failed to load World GeoJSON:', err);\n                setError('Failed to load map data');\n                setIsLoading(false);\n            });\n\n        return () => {\n            if (leafletMap.current) {\n                leafletMap.current.remove();\n                leafletMap.current = null;\n            }\n        };\n    }, []);\n\n    // Update styles when selection changes\n    useEffect(() => {\n        if (geoJsonLayer.current) {\n            geoJsonLayer.current.eachLayer((layer: L.Layer) => {\n                const feature = (layer as any).feature;\n                if (!feature) return;\n\n                const countryCode = feature?.properties?.ISO_A2 || '';\n                const isSelected = countryCode === selectedCountry;\n\n                (layer as L.Path).setStyle({\n                    fillColor: isSelected ? '#00C853' : '#1a1a1a',\n                    fillOpacity: isSelected ? 0.6 : 0.7,\n                    color: isSelected ? '#00C853' : '#333',\n                    weight: isSelected ? 2 : 0.5,\n                });\n            });\n        }\n    }, [selectedCountry]);\n\n    return (\n        <div className=\"relative\">\n            <div\n                ref={mapRef}\n                className=\"w-full h-[400px] bg-[#0a1a2a]\"\n                style={{ cursor: 'pointer' }}\n            />\n\n            {/* Loading overlay */}\n            {isLoading && (\n                <div className=\"absolute inset-0 bg-[#0a0a0a]/80 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                        <div className=\"animate-spin w-8 h-8 border-2 border-[#00C853] border-t-transparent rounded-full mx-auto mb-2\" />\n                        <p className=\"text-[#666] text-sm\">Loading world map...</p>\n                    </div>\n                </div>\n            )}\n\n            {/* Error overlay */}\n            {error && (\n                <div className=\"absolute inset-0 bg-[#0a0a0a]/80 flex items-center justify-center\">\n                    <p className=\"text-red-400 text-sm\">{error}</p>\n                </div>\n            )}\n\n            {/* Hovered country indicator */}\n            {hoveredCountry && (\n                <div className=\"absolute top-4 left-4 bg-[#111] border border-[#00C853] rounded-lg px-3 py-2 text-sm z-[1000]\">\n                    <span className=\"text-white font-medium\">{hoveredCountry}</span>\n                </div>\n            )}\n\n            {/* Zoom instructions */}\n            <div className=\"absolute bottom-4 right-4 text-xs text-[#666] bg-[#111]/80 px-2 py-1 rounded z-[1000]\">\n                Scroll to zoom • Drag to pan\n            </div>\n\n            {/* Custom styles for tooltip and controls */}\n            <style jsx global>{`\n        .country-tooltip {\n          background: #111 !important;\n          border: 1px solid #00C853 !important;\n          color: white !important;\n          font-weight: 500;\n          padding: 4px 8px !important;\n          border-radius: 4px !important;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.5);\n        }\n        .country-tooltip::before {\n          display: none !important;\n        }\n        .leaflet-control-zoom {\n          border: none !important;\n        }\n        .leaflet-control-zoom a {\n          background: #111 !important;\n          color: #00C853 !important;\n          border: 1px solid #333 !important;\n        }\n        .leaflet-control-zoom a:hover {\n          background: #222 !important;\n        }\n      `}</style>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}