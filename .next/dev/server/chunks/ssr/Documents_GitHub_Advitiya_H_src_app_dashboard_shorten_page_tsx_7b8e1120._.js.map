{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/grover.heer/Documents/GitHub/Advitiya_H/src/app/dashboard/shorten/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface ShortUrl {\n    id: number;\n    short_code: string;\n    original_url: string;\n    short_url: string;\n    click_count: number;\n    created_at: string;\n}\n\nexport default function ShortenPage() {\n    const [urls, setUrls] = useState<ShortUrl[]>([]);\n    const [url, setUrl] = useState('');\n    const [customCode, setCustomCode] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [copied, setCopied] = useState<number | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        fetchUrls();\n    }, []);\n\n    const fetchUrls = async () => {\n        try {\n            const res = await fetch('/api/shorten');\n            const data = await res.json();\n            if (data.success) {\n                setUrls(data.data);\n            }\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!url.trim()) return;\n\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const res = await fetch('/api/shorten', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    url: url.startsWith('http') ? url : `https://${url}`,\n                    custom_code: customCode.trim() || undefined,\n                }),\n            });\n\n            const data = await res.json();\n\n            if (data.success) {\n                setUrls([data.data, ...urls]);\n                setUrl('');\n                setCustomCode('');\n            } else {\n                setError(data.error);\n            }\n        } catch (err) {\n            setError('Failed to shorten URL');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleCopy = async (shortUrl: string, id: number) => {\n        try {\n            await navigator.clipboard.writeText(shortUrl);\n            setCopied(id);\n            setTimeout(() => setCopied(null), 2000);\n        } catch (err) {\n            console.error('Failed to copy');\n        }\n    };\n\n    const handleDelete = async (id: number) => {\n        if (!confirm('Delete this short URL?')) return;\n\n        try {\n            await fetch(`/api/shorten?id=${id}`, { method: 'DELETE' });\n            setUrls(urls.filter(u => u.id !== id));\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    return (\n        <div className=\"max-w-3xl mx-auto space-y-6\">\n            {/* Header */}\n            <div>\n                <h1 className=\"text-2xl font-bold text-white\">URL Shortener</h1>\n                <p className=\"text-[#666] mt-1\">Create short, memorable links</p>\n            </div>\n\n            {/* Create Form */}\n            <div className=\"bg-[#111] rounded-xl border border-[#222] p-6\">\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    <div>\n                        <label htmlFor=\"url\" className=\"block text-sm font-medium text-[#9A9A9A] mb-2\">\n                            Long URL\n                        </label>\n                        <input\n                            id=\"url\"\n                            type=\"text\"\n                            value={url}\n                            onChange={(e) => setUrl(e.target.value)}\n                            placeholder=\"https://example.com/very/long/url\"\n                            className=\"w-full px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-xl text-white placeholder-[#666] focus:border-[#00C853] focus:ring-1 focus:ring-[#00C853] outline-none\"\n                            required\n                        />\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"custom\" className=\"block text-sm font-medium text-[#9A9A9A] mb-2\">\n                            Custom Code <span className=\"text-[#666]\">(optional)</span>\n                        </label>\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"text-[#666] text-sm whitespace-nowrap\">domain.com/s/</span>\n                            <input\n                                id=\"custom\"\n                                type=\"text\"\n                                value={customCode}\n                                onChange={(e) => setCustomCode(e.target.value.replace(/[^a-zA-Z0-9-_]/g, ''))}\n                                placeholder=\"my-link\"\n                                className=\"flex-1 px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-xl text-white placeholder-[#666] focus:border-[#00C853] focus:ring-1 focus:ring-[#00C853] outline-none\"\n                                maxLength={20}\n                            />\n                        </div>\n                    </div>\n\n                    {error && (\n                        <p className=\"text-red-400 text-sm\">{error}</p>\n                    )}\n\n                    <button\n                        type=\"submit\"\n                        disabled={isLoading || !url.trim()}\n                        className=\"w-full px-4 py-3 bg-[#00C853] hover:bg-[#00E676] disabled:bg-[#00C853]/50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-colors\"\n                    >\n                        {isLoading ? 'Shortening...' : 'Shorten URL'}\n                    </button>\n                </form>\n            </div>\n\n            {/* URL List */}\n            {urls.length > 0 && (\n                <div className=\"bg-[#111] rounded-xl border border-[#222] overflow-hidden\">\n                    <div className=\"p-4 border-b border-[#222]\">\n                        <h2 className=\"text-sm font-bold text-[#9A9A9A] uppercase tracking-wider\">\n                            Your Short URLs\n                        </h2>\n                    </div>\n                    <div className=\"divide-y divide-[#222]\">\n                        {urls.map((shortUrl) => (\n                            <div key={shortUrl.id} className=\"p-4 hover:bg-[#0a0a0a] transition-colors\">\n                                <div className=\"flex items-start justify-between gap-4\">\n                                    <div className=\"flex-1 min-w-0\">\n                                        <a\n                                            href={shortUrl.short_url}\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            className=\"text-[#00C853] font-medium hover:underline truncate block\"\n                                        >\n                                            {shortUrl.short_url.replace('http://localhost:3000', 'domain.com')}\n                                        </a>\n                                        <p className=\"text-sm text-[#666] truncate mt-1\">{shortUrl.original_url}</p>\n                                        <div className=\"flex items-center gap-3 mt-2 text-xs text-[#666]\">\n                                            <span>{shortUrl.click_count} clicks</span>\n                                            <span>•</span>\n                                            <span>{new Date(shortUrl.created_at).toLocaleDateString()}</span>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center gap-2 shrink-0\">\n                                        <button\n                                            onClick={() => handleCopy(shortUrl.short_url, shortUrl.id)}\n                                            className={`px-3 py-1.5 text-xs rounded-lg transition-colors ${copied === shortUrl.id\n                                                    ? 'bg-[#00C853] text-black'\n                                                    : 'bg-[#222] text-white hover:bg-[#333]'\n                                                }`}\n                                        >\n                                            {copied === shortUrl.id ? 'Copied!' : 'Copy'}\n                                        </button>\n                                        <button\n                                            onClick={() => handleDelete(shortUrl.id)}\n                                            className=\"p-1.5 text-[#666] hover:text-red-400 rounded hover:bg-red-500/10\"\n                                            aria-label=\"Delete\"\n                                        >\n                                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                                            </svg>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {urls.length === 0 && (\n                <div className=\"text-center py-12 text-[#666]\">\n                    <div className=\"text-4xl mb-3 opacity-30\">✂️</div>\n                    <p>No short URLs yet</p>\n                    <p className=\"text-sm mt-1\">Create your first one above</p>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}